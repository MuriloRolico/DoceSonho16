<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - Doce Sonho Confeitaria</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style/base.css') }}">
    <style>
        :root {
            --primary-color: #d23f72;
            --primary-dark: #b22d5d;
            --secondary-color: #ffd6e0;
            --accent-color: #ffb3c6;
            --text-color: #2d2d2d;
            --light-text: #ffffff;
            --background-color: #fff8fa;
            --container-bg: #ffffff;
            --border-color: #f1c2ce;
            --shadow: 0 8px 20px rgba(210, 63, 114, 0.08);
            --radius: 10px;
        }

        body, html {
            scroll-behavior: smooth;
            background-color: var(--background-color);
        }

        body {
            font-family: 'Montserrat', sans-serif;
            line-height: 1.8;
            color: var(--text-color);
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            letter-spacing: 0.5px;
        }

        /* Barra de navegação */
        .navbar {
            background-color: rgba(255, 255, 255, 0.95) !important;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            padding: 15px 0;
        }

        .navbar-brand {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            color: var(--primary-color) !important;
            font-size: 1.8rem;
            letter-spacing: 1px;
        }

        .nav-link {
            font-weight: 500;
            color: var(--text-color) !important;
            margin: 0 12px;
            padding: 8px 16px;
            border-radius: 30px;
            transition: all 0.3s ease;
            position: relative;
            background: transparent;
            border: none;
        }

        .nav-link:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            background-color: var(--primary-color);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-link:hover:after {
            width: 70%;
        }

        .nav-link:hover {
            color: var(--primary-color) !important;
            transform: translateY(-2px);
        }

        .nav-link.active {
            color: var(--primary-color) !important;
            font-weight: 600;
        }

        .navbar-nav .badge {
            background-color: var(--primary-color) !important;
            position: absolute;
            top: 0;
            right: 0;
            transform: translate(25%, -25%);
        }

        /* Cards de perfil */
        .card {
            border-radius: var(--radius);
            border: none;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            background-color: var(--container-bg);
            margin-bottom: 25px;
        }

        .card:hover {
            box-shadow: 0 12px 30px rgba(210, 63, 114, 0.12);
            transform: translateY(-5px);
        }

        .card-header {
            border-top-left-radius: var(--radius) !important;
            border-top-right-radius: var(--radius) !important;
            background-color: var(--primary-color);
            border: none;
            padding: 15px 20px;
        }

        .card-header h5 {
            margin: 0;
            color: var(--light-text);
            font-weight: 600;
        }

        .card-body {
            padding: 25px;
        }

        /* Botões */
        .btn {
            border-radius: 30px;
            font-weight: 600;
            padding: 10px 25px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(178, 45, 93, 0.2);
        }

        .btn-outline-primary {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-outline-primary:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(178, 45, 93, 0.2);
        }

        .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
            border-color: #5a6268;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(90, 98, 104, 0.2);
        }

        .btn-danger {
            background-color: #dc3545;
            border-color: #dc3545;
        }

        .btn-danger:hover {
            background-color: #c82333;
            border-color: #bd2130;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.2);
        }

        /* Formulários */
        .form-control {
            border-radius: 8px;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            background-color: #fff;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(210, 63, 114, 0.25);
        }

        .form-label {
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        /* Imagem do perfil */
        .profile-img-container {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            position: relative;
        }

        .profile-img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid var(--primary-color);
            padding: 3px;
            transition: all 0.3s ease;
        }

                /* Footer */
        footer {
            background-color: #2d2d2d !important;
            color: #f8f8f8 !important;
            padding: 80px 0 30px;
            position: relative;
        }

        footer:before {
            content: '';
            position: absolute;
            top: -50px;
            left: 0;
            width: 100%;
            height: 100px;
            background-color: white;
            clip-path: ellipse(50% 50px at 50% 50px);
        }

        .footer-heading {
            font-size: 1.5rem;
            color: white;
            margin-bottom: 25px;
            position: relative;
            display: inline-block;
        }

        .footer-heading:after {
            content: '';
            position: absolute;
            width: 40px;
            height: 2px;
            background-color: var(--primary-color);
            bottom: -10px;
            left: 0;
        }

        .footer-text {
            color: #aaa;
            margin-bottom: 20px;
            line-height: 1.8;
        }

        .footer-social {
            margin-top: 25px;
        }

        .footer-social a {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.1);
            color: white;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        .footer-social a:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
        }

        .footer-links {
            list-style: none;
            padding-left: 0;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #aaa;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .footer-links a:hover {
            color: white;
            transform: translateX(5px);
        }

        .footer-contact li {
            color: #aaa;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .footer-contact-icon {
            margin-right: 15px;
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .footer-form .form-control {
            background-color: rgba(255,255,255,0.08);
            border: none;
            color: white;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .footer-form .form-control::placeholder {
            color: #aaa;
        }

        .footer-form .form-control:focus {
            background-color: rgba(255,255,255,0.12);
            box-shadow: none;
        }

        .footer-form .btn {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 25px;
            border-radius: 5px;
            font-weight: 600;
            border: none;
            transition: all 0.3s ease;
        }

        .footer-form .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-3px);
        }

        .footer-bottom {
            padding-left: 30px;
            padding-top: 30px;
            margin-top: 40px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .footer-copyright {
            color: #aaa;
        }

        .footer-policy a {
            color: #aaa;
            margin-left: 20px;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .footer-policy a:hover {
            color: white;
        }

        /* Modais */
        .modal-content {
            border-radius: var(--radius);
            border: none;
            box-shadow: var(--shadow);
        }

        .modal-header {
            border-bottom: none;
            padding: 20px 25px 10px;
        }

        .modal-footer {
            border-top: none;
            padding: 10px 25px 20px;
        }

        /* Mensagens flash */
        .alert {
            border-radius: var(--radius);
            border: none;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }

        /* WhatsApp float */
        .whatsapp-float a {
            background-color: #25D366;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        .whatsapp-float a:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        /* Tabs styling */
        .nav-tabs {
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 25px;
        }
        
        .nav-tabs .nav-link {
            border: none;
            color: var(--text-color);
            font-weight: 500;
            padding: 10px 20px;
            margin-right: 5px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .nav-tabs .nav-link:hover {
            border: none;
            color: var(--primary-color);
        }
        
        .nav-tabs .nav-link.active {
            border: none;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .nav-tabs .nav-link.active:after {
            content: '';
            position: absolute;
            bottom: -2px;
            
            width: 100%;
            height: 3px;
            background-color: var(--primary-color);
        }

        /* Estilos para dados mascarados */
        .masked-data {
            filter: blur(4px);
            transition: filter 0.3s ease;
            user-select: none;
        }

        /* Switch para ativar/desativar mascaramento */
        .form-switch .form-check-input {
            width: 3em;
            height: 1.5em;
            margin-left: 0;
            cursor: pointer;
        }

        .form-switch .form-check-input:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        /* Dica para dados mascarados */
        .masked-data-tip {
            display: none;
            position: absolute;
            background-color: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            z-index: 10;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
        }

        .masked-data:hover .masked-data-tip {
            display: block;
        }

        /* Novos badges de segurança */
        .security-badge {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            margin-left: 10px;
        }
        
        .security-badge i {
            margin-right: 5px;
        }

        /* Timeline de atividade */
        .activity-timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .activity-timeline:before {
            content: '';
            position: absolute;
            top: 0;
            left: 8px;
            height: 100%;
            width: 2px;
            background-color: var(--border-color);
        }
        
        .activity-item {
            position: relative;
            margin-bottom: 20px;
        }
        
        .activity-dot {
            position: absolute;
            left: -30px;
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: var(--primary-color);
            border: 3px solid var(--background-color);
            z-index: 1;
        }
        
        .activity-date {
            font-size: 0.8rem;
            color: #6c757d;
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <!-- Modal para Confirmar Logout -->
    <div class="modal fade" id="confirmarLogoutModal" tabindex="-1" aria-labelledby="confirmarLogoutModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmarLogoutModalLabel">Confirmar Logout</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Tem certeza que deseja sair da sua conta?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <a href="{{ url_for('auth.logout') }}" class="btn btn-primary">Sim, sair</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Barra de navegação -->
    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">Doce Sonho</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    {% if 'usuario_id' in session %}
                    <li class="nav-item">
                         <a class="nav-link" href="{{ url_for('product.todos_produtos') }}">Produtos</a>
                         
                    </li>
                    {% if is_admin() %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('admin.admin_produtos') }}">Admin</a>
                    </li>
                    {% endif %}
                    {% endif %}
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('cart.carrinho') }}">
                            <i class="bi bi-cart3 me-1"></i>
                            {% if 'carrinho' in session and session['carrinho'] %}
                            <span class="badge bg-danger">{{ session['carrinho']|length }}</span>
                            {% endif %}
                        </a>
                    </li>
                    {% if 'usuario_id' in session %}
                   
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#confirmarLogoutModal">
                            <i class="bi bi-box-arrow-right me-1"></i>Logout
                        </a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('auth.login') }}">
                            <i class="bi bi-box-arrow-in-right me-1"></i>Login
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('auth.registro') }}">
                            <i class="bi bi-person-plus me-1"></i>Registrar
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Mensagens Flash -->
    <div class="container mt-4">
        <div class="flash-messages">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>
        
        <!-- Cabeçalho do Perfil -->
        <section class="py-4">
            <div class="row align-items-center mb-4">
                <div class="col-md-6">
                    <h1 class="mb-0">Meu Perfil</h1>
                    <p class="text-muted">Gerencie suas informações pessoais e preferências</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <!-- Switch para ativar/desativar mascaramento de dados -->
                    <div class="form-check form-switch d-inline-flex align-items-center">
                        <input class="form-check-input me-2" type="checkbox" id="toggleDataMasking" checked>
                        <label class="form-check-label" for="toggleDataMasking">
                            <i class="bi bi-shield-lock me-1"></i>Mascarar Dados Sensíveis
                        </label>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Conteúdo Perfil -->
        <section class="pb-5">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card shadow">
                        <div class="card-body text-center py-4">
                            <div class="profile-img-container mb-4">
                                {% if usuario.foto_perfil %}
                                <img src="{{ usuario.foto_perfil }}" class="profile-img" alt="Foto de perfil">
                                {% else %}
                                <img src="{{ url_for('static', filename='img/default-profile.png') }}" class="profile-img" alt="Foto de perfil padrão">
                                {% endif %}
                            </div>
                            <h3 class="card-title mb-2">{{ usuario.nome }}</h3>
                            <p class="text-muted mb-1">
                                <span class="data-field" data-type="email">{{ usuario.email }}</span>
                               
                            </p>
                            <p class="text-muted">Membro desde {{ usuario.data_registro.strftime('%d/%m/%Y') }}</p>
                            
                            <div class="d-grid gap-3 mt-4">
                                <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#alterarFotoModal">
                                    <i class="bi bi-camera me-2"></i>Alterar Foto
                                </button>
                                <a href="{{ url_for('user.exportar_dados') }}" class="btn btn-outline-secondary">
                                    <i class="bi bi-download me-2"></i>Exportar Meus Dados
                                </a>
                                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#excluirContaModal">
                                    <i class="bi bi-trash me-2"></i>Excluir Minha Conta
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card de Atividade Recente -->
                    <div class="card shadow">
                        <div class="card-header">
                            <h5 class="mb-0">Atividade Recente</h5>
                        </div>
                        <div class="card-body">
                            <div class="activity-timeline">
                                <div class="activity-item">
                                    <div class="activity-dot"></div>
                                    <span class="activity-date">{{ (usuario.ultimo_acesso or usuario.data_registro).strftime('%d/%m/%Y %H:%M') }}</span>
                                    <p class="mb-0">Último acesso ao sistema</p>
                                </div>
                                
                                {% if usuario.ultimo_acesso and usuario.ultimo_acesso != usuario.data_registro %}
                                <div class="activity-item">
                                    <div class="activity-dot"></div>
                                    <span class="activity-date">{{ usuario.data_registro.strftime('%d/%m/%Y') }}</span>
                                    <p class="mb-0">Conta criada</p>
                                </div>
                                {% endif %}
                                
                                {% if pedidos and pedidos|length > 0 %}
                                <div class="activity-item">
                                    <div class="activity-dot"></div>
                                    <span class="activity-date">{{ pedidos[0].data.strftime('%d/%m/%Y %H:%M') }}</span>
                                    <p class="mb-0">Pedido mais recente</p>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-8">
                    <!-- Abas -->
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button" role="tab" aria-controls="info" aria-selected="true">
                                <i class="bi bi-person me-2"></i>Informações Básicas
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="endereco-tab" data-bs-toggle="tab" data-bs-target="#endereco" type="button" role="tab" aria-controls="endereco" aria-selected="false">
                                <i class="bi bi-geo-alt me-2"></i>Endereço
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="senha-tab" data-bs-toggle="tab" data-bs-target="#senha" type="button" role="tab" aria-controls="senha" aria-selected="false">
                                <i class="bi bi-shield-lock me-2"></i>Segurança
                            </button>
                        </li>
                        
                    </ul>














                    
                    <div class="tab-content" id="myTabContent">
                        <!-- Aba de Informações Básicas -->
                        <div class="tab-pane fade show active" id="info" role="tabpanel" aria-labelledby="info-tab">
                            <div class="card shadow">
                                <div class="card-header">
                                    <h5 class="mb-0">Informações Básicas</h5>
                                </div>
                                <div class="card-body">
                                    <form method="POST" action="{{ url_for('user.atualizar_perfil') }}">
                                        <div class="form-group mb-4">
                                            <label for="nome" class="form-label">Nome Completo:</label>

                                            <input type="text" id="nome" name="nome" value="{{ usuario.nome }}" required class="form-control">
                                        </div>
                                        <div class="form-group mb-4">
                                            <label for="email" class="form-label">Email:</label>
                                            <input type="email" id="email" name="email" class="form-control" value="{{ usuario.email }}" required>
                                        </div>
                                       
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="bi bi-check-circle me-2"></i>Salvar Alterações
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        






                        <!-- Aba de Endereço -->
                        <div class="tab-pane fade" id="endereco" role="tabpanel" aria-labelledby="endereco-tab">
                            <div class="card shadow">
                                <div class="card-header">
                                    <h5 class="mb-0">Endereço</h5>
                                </div>
                                <div class="card-body">
                                    <form method="POST" action="{{ url_for('user.atualizar_perfil') }}">
                                        <div class="row">
                                            <div class="col-md-5 mb-3">
                                                <label for="endereco_cep" class="form-label">CEP:</label>
                                                <div class="input-group">
                                                    <input type="text" id="endereco_cep" name="endereco_cep" class="form-control data-field" data-type="cep" value="{{ usuario.endereco_cep or '' }}" placeholder="00000-000">
                                                    <button class="btn btn-outline-secondary" type="button" id="buscarCep">
                                                        <i class="bi bi-search"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8 mb-3">
                                                <label for="endereco_rua" class="form-label">Rua:</label>
                                                <input type="text" id="endereco_rua" name="endereco_rua" class="form-control data-field" data-type="endereco" value="{{ usuario.endereco_rua or '' }}">
                                            </div>
                                            <div class="col-md-4 mb-3">
                                                <label for="endereco_numero" class="form-label">Número:</label>
                                                <input type="text" id="endereco_numero" name="endereco_numero" class="form-control data-field" data-type="endereco" value="{{ usuario.endereco_numero or '' }}">
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="endereco_complemento" class="form-label">Complemento:</label>
                                            <input type="text" id="endereco_complemento" name="endereco_complemento" class="form-control data-field" data-type="endereco" value="{{ usuario.endereco_complemento or '' }}" placeholder="Apto, Bloco, etc.">
                                        </div>
                                        <div class="row">
                                            <div class="col-md-4 mb-3">
                                                <label for="endereco_bairro" class="form-label">Bairro:</label>
                                                <input type="text" id="endereco_bairro" name="endereco_bairro" class="form-control data-field" data-type="endereco" value="{{ usuario.endereco_bairro or '' }}">
                                            </div>
                                            <div class="col-md-5 mb-3">
                                                <label for="endereco_cidade" class="form-label">Cidade:</label>
                                                <input type="text" id="endereco_cidade" name="endereco_cidade" class="form-control data-field" data-type="endereco" value="{{ usuario.endereco_cidade or '' }}">
                                            </div>
                                            <div class="col-md-3 mb-4">
                                                <label for="endereco_estado" class="form-label">Estado:</label>
                                                <select id="endereco_estado" name="endereco_estado" class="form-select data-field" data-type="endereco">
                                                    <option value="">Selecione</option>
                                                    <option value="AC" {% if usuario.endereco_estado == 'AC' %}selected{% endif %}>AC</option>
                                                    <option value="AL" {% if usuario.endereco_estado == 'AL' %}selected{% endif %}>AL</option>
                                                    <option value="AP" {% if usuario.endereco_estado == 'AP' %}selected{% endif %}>AP</option>
                                                    <option value="AM" {% if usuario.endereco_estado == 'AM' %}selected{% endif %}>AM</option>
                                                    <option value="BA" {% if usuario.endereco_estado == 'BA' %}selected{% endif %}>BA</option>
                                                    <option value="CE" {% if usuario.endereco_estado == 'CE' %}selected{% endif %}>CE</option>
                                                    <option value="DF" {% if usuario.endereco_estado == 'DF' %}selected{% endif %}>DF</option>
                                                    <option value="ES" {% if usuario.endereco_estado == 'ES' %}selected{% endif %}>ES</option>
                                                    <option value="GO" {% if usuario.endereco_estado == 'GO' %}selected{% endif %}>GO</option>
                                                    <option value="MA" {% if usuario.endereco_estado == 'MA' %}selected{% endif %}>MA</option>
                                                    <option value="MT" {% if usuario.endereco_estado == 'MT' %}selected{% endif %}>MT</option>
                                                    <option value="MS" {% if usuario.endereco_estado == 'MS' %}selected{% endif %}>MS</option>
                                                    <option value="MG" {% if usuario.endereco_estado == 'MG' %}selected{% endif %}>MG</option>
                                                    <option value="PA" {% if usuario.endereco_estado == 'PA' %}selected{% endif %}>PA</option>
                                                    <option value="PB" {% if usuario.endereco_estado == 'PB' %}selected{% endif %}>PB</option>
                                                    <option value="PR" {% if usuario.endereco_estado == 'PR' %}selected{% endif %}>PR</option>
                                                    <option value="PE" {% if usuario.endereco_estado == 'PE' %}selected{% endif %}>PE</option>
                                                    <option value="PI" {% if usuario.endereco_estado == 'PI' %}selected{% endif %}>PI</option>
                                                    <option value="RJ" {% if usuario.endereco_estado == 'RJ' %}selected{% endif %}>RJ</option>
                                                    <option value="RN" {% if usuario.endereco_estado == 'RN' %}selected{% endif %}>RN</option>
                                                    <option value="RS" {% if usuario.endereco_estado == 'RS' %}selected{% endif %}>RS</option>
                                                    <option value="RO" {% if usuario.endereco_estado == 'RO' %}selected{% endif %}>RO</option>
                                                    <option value="RR" {% if usuario.endereco_estado == 'RR' %}selected{% endif %}>RR</option>
                                                    <option value="SC" {% if usuario.endereco_estado == 'SC' %}selected{% endif %}>SC</option>
                                                    <option value="SP" {% if usuario.endereco_estado == 'SP' %}selected{% endif %}>SP</option>
                                                    <option value="SE" {% if usuario.endereco_estado == 'SE' %}selected{% endif %}>SE</option>
                                                    <option value="TO" {% if usuario.endereco_estado == 'TO' %}selected{% endif %}>TO</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="bi bi-geo-alt me-2"></i>Salvar Endereço
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Aba de Segurança -->
                        <div class="tab-pane fade" id="senha" role="tabpanel" aria-labelledby="senha-tab">
                            <div class="card shadow">
                                <div class="card-header">
                                    <h5 class="mb-0">Alterar Senha</h5>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-info mb-4">
                                        <i class="bi bi-info-circle-fill me-2"></i>
                                        Recomendamos alterar sua senha periodicamente para maior segurança.
                                    </div>
                                    
                                    <form method="POST" action="{{ url_for('user.alterar_senha') }}">
                                        <div class="form-group mb-4">
                                            <label for="senha_atual" class="form-label">Senha Atual:</label>
                                            <input type="password" id="senha_atual" name="senha_atual" class="form-control" required>
                                        </div>
                                        <div class="form-group mb-4">
                                            <label for="nova_senha" class="form-label">Nova Senha:</label>
                                            <input type="password" id="nova_senha" name="nova_senha" class="form-control" required 
                                                   pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" 
                                                   title="A senha deve conter pelo menos 8 caracteres, incluindo letras maiúsculas, minúsculas, números e caracteres especiais">
                                        </div>
                                        <div class="form-group mb-4">
                                            <label for="confirmar_nova_senha" class="form-label">Confirmar Nova Senha:</label>
                                            <input type="password" id="confirmar_nova_senha" name="confirmar_nova_senha" class="form-control" required>
                                        </div>
                                        
                                        <div class="password-strength mb-4">
                                            <h6 class="mb-2">Requisitos de segurança:</h6>
                                            <div class="d-flex flex-wrap gap-2">
                                                <span class="badge bg-light text-dark" id="req-length"><i class="bi bi-x-circle me-1"></i>Mínimo 8 caracteres</span>
                                                <span class="badge bg-light text-dark" id="req-lowercase"><i class="bi bi-x-circle me-1"></i>Letra minúscula</span>
                                                <span class="badge bg-light text-dark" id="req-uppercase"><i class="bi bi-x-circle me-1"></i>Letra maiúscula</span>
                                                <span class="badge bg-light text-dark" id="req-number"><i class="bi bi-x-circle me-1"></i>Número</span>
                                                <span class="badge bg-light text-dark" id="req-special"><i class="bi bi-x-circle me-1"></i>Caractere especial</span>
                                            </div>
                                        </div>
                                        
                                        <div class="d-grid">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="bi bi-shield-lock me-2"></i>Alterar Senha
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            
                            <!-- Card de Sessões Ativas -->
                            <div class="card shadow mt-4">
                                <div class="card-header">
                                    <h5 class="mb-0">Sessões Ativas</h5>
                                </div>
                                <div class="card-body">
                                    <div class="list-group">
                                        <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="mb-1">Sessão Atual</h6>
                                                <p class="mb-1 small text-muted">{{ request.user_agent.string }}</p>
                                                <small class="text-muted">{{ usuario.ultimo_acesso.strftime('%d/%m/%Y %H:%M') if usuario.ultimo_acesso else 'Agora' }}</small>
                                            </div>
                                            <span class="badge bg-success">Atual</span>
                                        </div>
                                        
                                        {% for token in tokens %}
                                        {% if not token.is_revogado and token.token != session.get('auth_token') %}
                                        <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="mb-1">Outro Dispositivo</h6>
                                                <p class="mb-1 small text-muted">{{ token.device_info }}</p>
                                                <small class="text-muted">{{ token.data_criacao.strftime('%d/%m/%Y %H:%M') }}</small>
                                            </div>
                                            <form method="POST" action="{{ url_for('user.revogar_token', token_id=token.id) }}">
                                                <button type="submit" class="btn btn-sm btn-outline-danger">Encerrar</button>
                                            </form>
                                        </div>
                                        {% endif %}
                                        {% endfor %}
                                    </div>
                                    
                                    <div class="d-grid mt-3">
                                        <a href="{{ url_for('auth.logout') }}" class="btn btn-outline-danger">
                                            <i class="bi bi-x-circle me-2"></i>Encerrar Todas as Sessões
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        

    <!-- Modal para Alterar Foto -->
    <div class="modal fade" id="alterarFotoModal" tabindex="-1" aria-labelledby="alterarFotoModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="alterarFotoModalLabel">Alterar Foto de Perfil</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="POST" action="{{ url_for('user.atualizar_foto') }}" enctype="multipart/form-data">
                    <div class="modal-body">
                        <div class="text-center mb-4">
                            <div class="profile-img-container">
                                {% if usuario.foto_perfil %}
                                <img src="{{ usuario.foto_perfil }}" class="profile-img preview-img" alt="Foto de perfil">
                                {% else %}
                                <img src="{{ url_for('static', filename='img/default-profile.png') }}" class="profile-img preview-img" alt="Foto de perfil padrão">
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="foto_perfil" class="form-label">Selecione uma nova foto:</label>
                            <input class="form-control" type="file" id="foto_perfil" name="foto_perfil" accept="image/*" required>
                            <div class="form-text mt-2">Formatos permitidos: JPG, JPEG, PNG. Tamanho máximo: 5MB.</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para Excluir Conta -->
    <div class="modal fade" id="excluirContaModal" tabindex="-1" aria-labelledby="excluirContaModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="excluirContaModalLabel">Confirmação de Exclusão de Conta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form method="POST" action="{{ url_for('user.excluir_conta') }}">
                    <div class="modal-body">
                        <div class="alert alert-warning">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i><strong>Atenção!</strong> Esta ação é irreversível.
                        </div>
                        <p>Ao excluir sua conta, todas as suas informações pessoais, histórico de pedidos e bolos personalizados serão permanentemente removidos.</p>
                        <div class="mb-4">
                            <label for="confirmar_senha" class="form-label">Digite sua senha para confirmar:</label>
                            <input type="password" class="form-control" id="confirmar_senha" name="confirmar_senha" required>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="confirmar_exclusao" name="confirmar_exclusao" required>
                            <label class="form-check-label" for="confirmar_exclusao">
                                Eu entendo que esta ação é irreversível e desejo excluir minha conta
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-danger">Excluir Conta</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

       <footer>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-4 col-md-6">
                    <h4 class="footer-heading">Doce Sonho Confeitaria</h4>
                    <p class="footer-text">Transformamos ingredientes selecionados em momentos doces e inesquecíveis desde 2015. Nossa paixão é adoçar sua vida com sabores especiais.</p>
                    <div class="footer-social">
                        <a href="#"><i class="bi bi-facebook"></i></a>
                        <a href="#"><i class="bi bi-instagram"></i></a>
                        <a href="#"><i class="bi bi-whatsapp"></i></a>
                        <a href="#"><i class="bi bi-tiktok"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6">
                    <h4 class="footer-heading">Links Rápidos</h4>
                    <ul class="footer-links">
                        <li><a href="{{ url_for('index') }}">Início</a></li>
                        <li><a href="{{ url_for('product.todos_produtos') }}">Produtos</a></li>
                        <li><a href="{{ url_for('product.montar_bolo') }}">Monte seu Bolo</a></li>
                        <li><a href="{{ url_for('sobrenos.sobrenos') }}">Sobre Nós</a></li>                      
                    </ul>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="footer-heading">Contato</h4>
                    <ul class="footer-links footer-contact">
                        <li>
                            <i class="bi bi-geo-alt footer-contact-icon"></i>
                            Rua das Flores, 123 - Centro
                        </li>
                        <li>
                            <i class="bi bi-telephone footer-contact-icon"></i>
                            (11) 9999-9999
                        </li>
                        <li>
                            <i class="bi bi-envelope footer-contact-icon"></i>
                            contato@docesonho.com.br
                        </li>
                        <li>
                            <i class="bi bi-clock footer-contact-icon"></i>
                            Seg-Sex: 9h às 18h | Sáb: 9h às 14h
                        </li>
                    </ul>
                </div>
               
            </div>
            <div class="footer-bottom">
                <div class="row">
                    <div class="col-md-6">
                        <p class="footer-copyright">&copy; 2025 Doce Sonho Confeitaria. Todos os direitos reservados.</p>
                    </div>
                    <div class="col-md-6 text-md-end footer-policy">
                         <a  href="{{ url_for('auth.politica_privacidade') }}">Política de Privacidade</a>
                     
                       
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Botão de WhatsApp flutuante -->
    <div class="whatsapp-float">
        <a href="https://wa.me/5511999999999" target="_blank" class="btn btn-success rounded-circle position-fixed bottom-0 end-0 m-4 p-3">
            <i class="bi bi-whatsapp fs-4"></i>
        </a>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
 <!-- Script completo para o perfil -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // ========== MASCARAMENTO DE DADOS ==========
        const toggleDataMasking = document.getElementById('toggleDataMasking');
        const dataFields = document.querySelectorAll('.data-field');
        
        function applyDataMasking(shouldMask) {
            dataFields.forEach(field => {
                if (shouldMask) {
                    field.classList.add('masked-data');
                } else {
                    field.classList.remove('masked-data');
                }
            });
            
            // Salvar preferência no localStorage
            localStorage.setItem('dataMasking', shouldMask ? 'true' : 'false');
        }
        
        // Inicializar com base no localStorage ou padrão como ativado
        const savedMaskingPreference = localStorage.getItem('dataMasking');
        const shouldMaskData = savedMaskingPreference !== null ? savedMaskingPreference === 'true' : true;
        
        if (toggleDataMasking) {
            toggleDataMasking.checked = shouldMaskData;
            applyDataMasking(shouldMaskData);
            
            // Ouvir mudanças no toggle
            toggleDataMasking.addEventListener('change', function() {
                applyDataMasking(this.checked);
            });
        }
        
        // ========== PREVIEW DE IMAGEM ==========
        const fotoInput = document.getElementById('foto_perfil');
        const previewImg = document.querySelector('.preview-img');
        
        if (fotoInput && previewImg) {
            fotoInput.addEventListener('change', function() {
                const file = this.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewImg.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
        }
        
        // ========== VALIDAÇÃO DE SENHA ==========
        const novaSenha = document.getElementById('nova_senha');
        const confirmarSenha = document.getElementById('confirmar_nova_senha');
        
        if (novaSenha) {
            novaSenha.addEventListener('input', function() {
                const senha = this.value;
                
                // Verificar requisitos
                const requisitos = [
                    { id: 'req-length', test: senha.length >= 8, text: 'Mínimo 8 caracteres' },
                    { id: 'req-lowercase', test: /[a-z]/.test(senha), text: 'Letra minúscula' },
                    { id: 'req-uppercase', test: /[A-Z]/.test(senha), text: 'Letra maiúscula' },
                    { id: 'req-number', test: /\d/.test(senha), text: 'Número' },
                    { id: 'req-special', test: /[@$!%*?&]/.test(senha), text: 'Caractere especial' }
                ];
                
                requisitos.forEach(req => {
                    const elemento = document.getElementById(req.id);
                    if (elemento) {
                        elemento.innerHTML = req.test ? 
                            `<i class="bi bi-check-circle-fill text-success me-1"></i>${req.text}` : 
                            `<i class="bi bi-x-circle me-1"></i>${req.text}`;
                        
                        // Atualizar classes visuais
                        if (req.test) {
                            elemento.classList.remove('bg-light', 'text-dark');
                            elemento.classList.add('bg-success', 'text-white');
                        } else {
                            elemento.classList.remove('bg-success', 'text-white');
                            elemento.classList.add('bg-light', 'text-dark');
                        }
                    }
                });
            });
        }
        
        // Verificação de senhas iguais
        if (novaSenha && confirmarSenha) {
            confirmarSenha.addEventListener('input', function() {
                if (this.value !== novaSenha.value) {
                    this.setCustomValidity('As senhas não coincidem');
                } else {
                    this.setCustomValidity('');
                }
            });
        }
        
        // ========== FORMATAÇÃO DE CAMPOS ==========
        
        // Formatação de CPF
        const cpfInput = document.getElementById('cpf');
        if (cpfInput) {
            cpfInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) {
                    value = value.substring(0, 11);
                }
                
                if (value.length > 9) {
                    value = value.replace(/^(\d{3})(\d{3})(\d{3})(\d{2})$/, "$1.$2.$3-$4");
                } else if (value.length > 6) {
                    value = value.replace(/^(\d{3})(\d{3})(\d{0,3})/, "$1.$2.$3");
                } else if (value.length > 3) {
                    value = value.replace(/^(\d{3})(\d{0,3})/, "$1.$2");
                }
                
                e.target.value = value;
            });
        }
        
        // ========== VIACEP - BUSCA DE ENDEREÇO ==========
        const cepInput = document.getElementById('endereco_cep');
        const buscarCepBtn = document.getElementById('buscarCep');
        const cepCache = new Map();
        
        // Formatação de CEP com auto-busca
        if (cepInput) {
            cepInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 8) {
                    value = value.substring(0, 8);
                }
                
                if (value.length > 5) {
                    value = value.replace(/^(\d{5})(\d{0,3})/, "$1-$2");
                }
                
                e.target.value = value;
                
                // Auto-busca quando CEP estiver completo
                const cepLimpo = value.replace(/\D/g, '');
                if (cepLimpo.length === 8) {
                    buscarCEP(cepLimpo);
                }
            });
            
            // Busca também quando usuário cola um CEP
            cepInput.addEventListener('paste', function(e) {
                setTimeout(() => {
                    const cepLimpo = this.value.replace(/\D/g, '');
                    if (cepLimpo.length === 8) {
                        buscarCEP(cepLimpo);
                    }
                }, 100);
            });
            
            // Permitir busca com Enter
            cepInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const cep = this.value.replace(/\D/g, '');
                    buscarCEP(cep);
                }
            });
        }
        
        // Função principal de busca de CEP
        async function buscarCEP(cep) {
            if (!cep || cep.length !== 8) {
                mostrarErro('CEP deve conter exatamente 8 dígitos.');
                return;
            }
            
            // Verificar cache primeiro
            if (cepCache.has(cep)) {
                preencherEndereco(cepCache.get(cep));
                mostrarSucesso('Endereço encontrado (cache)!');
                return;
            }
            
            // Mostrar indicador de carregamento
            setLoadingState(true);
            
            try {
                const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error('Erro na requisição');
                }
                
                if (data.erro) {
                    mostrarErro('CEP não encontrado. Verifique se o número está correto.');
                    return;
                }
                
                // Salvar no cache
                cepCache.set(cep, data);
                
                // Preencher campos
                preencherEndereco(data);
                mostrarSucesso('Endereço encontrado com sucesso!');
                
            } catch (error) {
                console.error('Erro ao buscar CEP:', error);
                mostrarErro('Erro ao buscar CEP. Verifique sua conexão e tente novamente.');
            } finally {
                setLoadingState(false);
            }
        }
        
        // Função para preencher os campos de endereço
        function preencherEndereco(data) {
            const campos = {
                'endereco_rua': data.logradouro,
                'endereco_bairro': data.bairro,
                'endereco_cidade': data.localidade,
                'endereco_estado': data.uf
            };
            
            Object.entries(campos).forEach(([id, valor]) => {
                const campo = document.getElementById(id);
                if (campo && valor) {
                    campo.value = valor;
                    // Animação sutil para mostrar que o campo foi preenchido
                    campo.classList.add('border-success');
                    setTimeout(() => {
                        campo.classList.remove('border-success');
                    }, 2000);
                }
            });
            
            // SEMPRE limpar o campo número quando endereço mudar
            const numeroField = document.getElementById('endereco_numero');
            const complementoField = document.getElementById('endereco_complemento');
            
            if (numeroField) {
                numeroField.value = '';
                numeroField.focus();
            }
            
            // Também limpar complemento para começar com endereço "limpo"
            if (complementoField) {
                complementoField.value = '';
            }
        }
        
        // Função para controlar estado de carregamento
        function setLoadingState(isLoading) {
            if (!buscarCepBtn) return;
            
            if (isLoading) {
                buscarCepBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>';
                buscarCepBtn.disabled = true;
                if (cepInput) cepInput.disabled = true;
            } else {
                buscarCepBtn.innerHTML = '<i class="bi bi-search"></i>';
                buscarCepBtn.disabled = false;
                if (cepInput) cepInput.disabled = false;
            }
        }
        
        // Busca manual via botão
        if (buscarCepBtn) {
            buscarCepBtn.addEventListener('click', function() {
                const cep = cepInput.value.replace(/\D/g, '');
                buscarCEP(cep);
            });
        }
        
        // Limpeza de campos quando CEP é alterado significativamente
        if (cepInput) {
            let ultimoCepBuscado = '';
            
            cepInput.addEventListener('input', function() {
                const cepAtual = this.value.replace(/\D/g, '');
                
                // Se o CEP mudou significativamente, limpar campos
                if (ultimoCepBuscado && 
                    cepAtual.length < 8 && 
                    !ultimoCepBuscado.startsWith(cepAtual.substring(0, 5))) {
                    
                    limparCamposEndereco();
                }
            });
            
            function limparCamposEndereco() {
                const campos = ['endereco_rua', 'endereco_bairro', 'endereco_cidade', 'endereco_estado', 'endereco_numero', 'endereco_complemento'];
                campos.forEach(id => {
                    const campo = document.getElementById(id);
                    if (campo) {
                        campo.value = '';
                        campo.classList.remove('border-success');
                    }
                });
            }
        }
        
        // ========== SISTEMA DE TOAST NOTIFICATIONS ==========
        
        // Funções para mostrar mensagens
        function mostrarSucesso(mensagem) {
            mostrarToast(mensagem, 'success');
        }
        
        function mostrarErro(mensagem) {
            mostrarToast(mensagem, 'danger');
        }
        
        // Sistema de toast melhorado (substitui alerts)
        function mostrarToast(mensagem, tipo = 'info') {
            // Remove toasts anteriores
            const existingToasts = document.querySelectorAll('.toast-custom');
            existingToasts.forEach(toast => toast.remove());
            
            const toast = document.createElement('div');
            toast.className = `toast-custom alert alert-${tipo} alert-dismissible fade show position-fixed`;
            toast.style.cssText = `
                top: 20px; 
                right: 20px; 
                z-index: 9999; 
                min-width: 300px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            `;
            
            const icon = tipo === 'success' ? 'check-circle-fill' : 
                        tipo === 'danger' ? 'exclamation-triangle-fill' : 'info-circle-fill';
            
            toast.innerHTML = `
                <i class="bi bi-${icon} me-2"></i>${mensagem}
                <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>
            `;
            
            document.body.appendChild(toast);
            
            // Auto-remove após 5 segundos
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 5000);
        }
        
        // ========== FORMULÁRIO DE CONTATO ==========
        const contatoForm = document.getElementById('contato-form');
        if (contatoForm) {
            contatoForm.addEventListener('submit', function(e) {
                e.preventDefault();
                mostrarSucesso('Obrigado pelo contato! Responderemos em breve.');
                this.reset();
            });
        }
    });
</script>
</body>
</html>